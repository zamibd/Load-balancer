global:
  scrape_interval: 15s
  evaluation_interval: 15s

# Load alerting rules
rule_files:
  - /etc/prometheus/alerts.yml

scrape_configs:
  # HAProxy native Prometheus metrics endpoint
  - job_name: 'haproxy'
    static_configs:
      - targets: ['haproxy:8404']
    metrics_path: /metrics
    # No auth required for /metrics endpoint (configured in haproxy.cfg)

  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Valkey (Redis-compatible) metrics via redis_exporter
  # Note: Requires redis_exporter sidecar or Valkey's built-in metrics
  - job_name: 'valkey'
    static_configs:
      - targets: ['redis-exporter:9121']
